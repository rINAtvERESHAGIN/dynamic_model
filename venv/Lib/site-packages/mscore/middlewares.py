from django.utils.deprecation import MiddlewareMixin
from django.http.request import HttpRequest
from .models import User


def get_user(request: HttpRequest):
    user = User()
    user.uid = request.META.get('HTTP_UUIDUSER', None)
    return user


class AuthMiddleware(MiddlewareMixin):
    def process_request(self, request):
        request.user = get_user(request)